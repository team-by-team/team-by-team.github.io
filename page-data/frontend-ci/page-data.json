{"componentChunkName":"component---src-templates-post-jsx","path":"/frontend-ci/","result":{"data":{"site":{"siteMetadata":{"title":"TEAM-BY-TEAM"}},"markdownRemark":{"id":"bc022be2-f94e-5294-9b49-6fba751b5bfd","excerpt":"해당 글은 우아한테크코스 5기 팀바팀 크루 루루가 작성했습니다! 프론트엔드 Github Action 테스트 자동화 팀바팀은 github action을 이용해 프론트엔드 PR시 테스트를 잘 통과하는지 자동으로 테스트하고 있다. 또한, 추후에 Build시 빌드가 잘 되는지 자동으로 테스트할 예정이다. 테스트 자동화를 하면 여러명이 하나의 프로젝트를 같이 진행…","html":"<blockquote>\n<p>해당 글은 우아한테크코스 5기 팀바팀 크루 <a href=\"https://github.com/hafnium1923\">루루</a>가 작성했습니다!</p>\n</blockquote>\n<h1>프론트엔드 Github Action 테스트 자동화</h1>\n<p>팀바팀은 github action을 이용해 프론트엔드 PR시 테스트를 잘 통과하는지 자동으로 테스트하고 있다. 또한, 추후에 Build시 빌드가 잘 되는지 자동으로 테스트할 예정이다. 테스트 자동화를 하면 여러명이 하나의 프로젝트를 같이 진행하는 만큼 나의 코드가 기존의 테스트에 영향을 주는지 사람이 직접 확인하지 않아도 쉽게 확인할 수 있다. 테스트가 통과하지 못한다면 merge를 하지 못하게 막아 merge시 안전성을 높일 수 있다.</p>\n<h1>Github Action을 이용한 테스트 자동화</h1>\n<p>github workflows의 하위에 다음과 같은 파일을 넣는다. 확장자는 <code class=\"language-text\">.yml</code>이다.</p>\n<p>자세한 내용은 아래 주석으로 작성했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> frontend<span class=\"token operator\">-</span>ci <span class=\"token comment\">//액션의 이름</span>\n\n<span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span>\n  <span class=\"token literal-property property\">pull_request</span><span class=\"token operator\">:</span> <span class=\"token comment\">//PR 요청일 때</span>\n    <span class=\"token literal-property property\">branches</span><span class=\"token operator\">:</span>\n      <span class=\"token operator\">-</span> develop <span class=\"token comment\">//해당 브랜치에서 PR이벤트가 일어났을 때 실행 </span>\n    <span class=\"token literal-property property\">paths</span><span class=\"token operator\">:</span>\n      <span class=\"token operator\">-</span> frontend<span class=\"token comment\">/** //frontend하위 폴더에서 작업이 일어날때만 실행\n\njobs:\n  unit-test:\n    runs-on: ubuntu-latest //어떤 머신으로 실행할건지\n    permissions:\n      contents: write //GITHUB_TOKEN에 부여된 기본 사용 권한\n    concurrency: //동시성 제어\n      group: ${{ github.workflow }}-${{ github.ref }} //동시성을 제어할 그룹 설정\n      cancel-in-progress: true //동시에 돌아가게 된다면 가장 최신의 워크플로우 실행\n    env:\n      working-directory: ./frontend //어디에서 커맨드를 실행 할 건지 \n\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v3\n\n      - name: Setup node with cache //종속성 파일 캐싱하기.(각 PR 별로 생성된다) \n        uses: actions/setup-node@v3\n        with: //캐싱하는 방법\n          node-version: 18\n          cache: 'npm'\n          cache-dependency-path: '**/</span><span class=\"token keyword\">package</span><span class=\"token operator\">-</span>lock<span class=\"token punctuation\">.</span>json'\n\n      <span class=\"token operator\">-</span> name<span class=\"token operator\">:</span> Install dependencies <span class=\"token comment\">//종속성 설치하기</span>\n        <span class=\"token literal-property property\">run</span><span class=\"token operator\">:</span> npm ci\n        working<span class=\"token operator\">-</span>directory<span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env<span class=\"token punctuation\">.</span>working<span class=\"token operator\">-</span>directory <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n      <span class=\"token operator\">-</span> name<span class=\"token operator\">:</span> Run unit test <span class=\"token comment\">//테스트 실행하기</span>\n        <span class=\"token literal-property property\">run</span><span class=\"token operator\">:</span> npm run test<span class=\"token operator\">:</span>ci \n        working<span class=\"token operator\">-</span>directory<span class=\"token operator\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> env<span class=\"token punctuation\">.</span>working<span class=\"token operator\">-</span>directory <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>캐싱 관련해서는 아래 자료 참고하면 더 자세히 알 수 있다.</p>\n<p><a href=\"https://docs.github.com/en/actions/using-workflows/caching-dependencies-to-speed-up-workflows\">Caching dependencies to speed up workflows - GitHub Docs</a></p>\n<p><a href=\"https://github.blog/changelog/2021-09-07-github-actions-setup-node-supports-dependency-caching-for-projects-with-monorepo-and-pnpm-package-manager/\">GitHub Actions: Setup-node supports dependency caching for projects with monorepo and pnpm package manager</a></p>\n<h1>PR Merge 막기</h1>\n<p>열심히 테스트 자동화를 했는데 테스트 실패한 PR이 merge되면 무슨 소용이 있을까. 다행히 github에서는 테스트가 통과하지 못하면 merge 하지 못하게 해주는 설정이 있다.</p>\n<h2>레포 설정 → 브랜치</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/d92f7700560790e511c26cd38c7e411d/309ad/Untitled.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 59.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABMUlEQVR42q2T23LDIAxE+f8PbZv4ihF37K2WOJmmb/VUM57ISBztEmNEPDa7obWG3+GcwzhOWNcV0zT13K5W8xkxxldfazsGrfkQYVJKKLXi+AF65twkChVxsNZi2zZ473WQoJTy6D0O7PuBmHPnGNEGQqmw6gIb2cSoOvnmEmLdX4Oy1kPUtZR1X4b4ALsJ4mJRcoFxm8P9dlc7Y39on0A+qTQMkrCf731Nh9MaoUlVOQUuusePM7LWTFBbtEGlzCn/qaZpnlTdcb5TeFUnVMlfuiqlKrigxIdLY5XOA52XtRfq2VRre1n/SxiCPj6/usLMaUmnlQf0EpD/nIi8fy5JUPeGK2GsApd5eVMjiWrzRSDPcBgQQngrXLF7nuHSFfI2PG/LgWuwDlz1BlDlf8U394iwdR5sp2cAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Untitled' title='' src='/static/d92f7700560790e511c26cd38c7e411d/ca1dc/Untitled.png' srcset='/static/d92f7700560790e511c26cd38c7e411d/e7570/Untitled.png 170w,\n/static/d92f7700560790e511c26cd38c7e411d/f46e7/Untitled.png 340w,\n/static/d92f7700560790e511c26cd38c7e411d/ca1dc/Untitled.png 680w,\n/static/d92f7700560790e511c26cd38c7e411d/02d09/Untitled.png 1020w,\n/static/d92f7700560790e511c26cd38c7e411d/309ad/Untitled.png 1198w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Untitled</figcaption>\n  </figure></p>\n<p>팀바팀은 개발용 브랜치 develop과 배포 브랜치 main를 사용하기 때문에 이렇게 두개가 올라가 있다. 처음 룰을 등록한다면 오른쪽 위에 있는 Add rule을 눌러 추가한다.</p>\n<p>아래 내려서 이 항목을 체크해주면 끝!</p>\n<p><img src=\"./images/Untitled%201.png\" alt=\"Untitled\"></p>","frontmatter":{"title":"프론트엔드 Github Action 테스트 자동화","date":"July 24, 2023","update":"July 24, 2023","tags":["frontend","test"],"series":null},"fields":{"slug":"/frontend-ci/","readingTime":{"minutes":3.51}}},"seriesList":{"edges":[{"node":{"id":"9b5cdcae-47e9-5839-9ed5-77d2bb13f063","fields":{"slug":"/event-storming/"},"frontmatter":{"title":"팀바팀 이벤트 스토밍(Event Storming) 도입기"}}},{"node":{"id":"cc7a0ab1-5503-5c29-aca6-5707103b16cd","fields":{"slug":"/local-date-time-binding/"},"frontmatter":{"title":"LocalDateTime 원하는 Format으로 바인딩하기 (feat.@DateTimeFormat, @JsonFormat)"}}},{"node":{"id":"df971529-c38c-5b99-8b34-e0d1f887ad8c","fields":{"slug":"/component-styling/"},"frontmatter":{"title":"팀바팀 컴포넌트 스타일링 방법 선택"}}},{"node":{"id":"fb6c635b-2fb9-5625-88bb-0c70f8e7543a","fields":{"slug":"/frontend-husky/"},"frontmatter":{"title":"프론트엔드 Husky 사용해서 commit 단위로 Lint 검사"}}},{"node":{"id":"dde0edaf-b006-51f0-a50e-f47285556fc0","fields":{"slug":"/react-query-reason/"},"frontmatter":{"title":"팀바팀 React query 도입이유"}}},{"node":{"id":"bc022be2-f94e-5294-9b49-6fba751b5bfd","fields":{"slug":"/frontend-ci/"},"frontmatter":{"title":"프론트엔드 Github Action 테스트 자동화"}}},{"node":{"id":"0bf82b69-7aee-5aa6-bb7e-8d973d2bc283","fields":{"slug":"/spring-event/"},"frontmatter":{"title":"스프링 이벤트를 사용하여 도메인 의존성 분리하기"}}},{"node":{"id":"b1a9ce77-e471-5b77-a2c6-5d3532cfc926","fields":{"slug":"/base64url/"},"frontmatter":{"title":"Base64와 Base64Url의 차이 및 구글 로그인 Trouble Shooting"}}}]},"previous":{"fields":{"slug":"/react-query-reason/"},"frontmatter":{"title":"팀바팀 React query 도입이유"}},"next":{"fields":{"slug":"/spring-event/"},"frontmatter":{"title":"스프링 이벤트를 사용하여 도메인 의존성 분리하기"}}},"pageContext":{"id":"bc022be2-f94e-5294-9b49-6fba751b5bfd","series":null,"previousPostId":"dde0edaf-b006-51f0-a50e-f47285556fc0","nextPostId":"0bf82b69-7aee-5aa6-bb7e-8d973d2bc283"}},"staticQueryHashes":[],"slicesMap":{}}