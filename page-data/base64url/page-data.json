{"componentChunkName":"component---src-templates-post-jsx","path":"/base64url/","result":{"data":{"site":{"siteMetadata":{"title":"TEAM-BY-TEAM"}},"markdownRemark":{"id":"b1a9ce77-e471-5b77-a2c6-5d3532cfc926","excerpt":"해당 글은 우아한테크코스 5기 팀바팀 크루 성하가 작성했습니다!! ❌ 0. 문제 상황 서비스를 배포하고 나서 피드백을 받을 때, 일부 사용자의 구글 로그인이 정상적으로 작동하지 않는 문제가 발생했습니다.\n 서버의 로그를 확인해보니, 다음과 같은 에러가 발생하고 있었습니다.\n 구글 로그인에 관한 에러인데 왜 Base 64 에러가 뜨는지 상당히 궁금했었습니다…","html":"<blockquote>\n<p>해당 글은 우아한테크코스 5기 팀바팀 크루 <a href=\"https://github.com/sh111-coder\">성하</a>가 작성했습니다!!</p>\n</blockquote>\n<br>\n<h1>❌ 0. 문제 상황</h1>\n<p>서비스를 배포하고 나서 피드백을 받을 때, 일부 사용자의 구글 로그인이 정상적으로 작동하지 않는 문제가 발생했습니다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/3c5ea8cc5079391a9f8431c02e7f99f8/55bfd/img.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 31.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVR42m2Py26CUBCGecWGu3BaL21XQuStmrQLiN244x0EgbU3FK+gyEb/OpOw60m+zLnMfDNHknWBl1cXimZCVWSoqgpZlmFZFlzXheM48DwPo9EIw+GQ72zb5jxN06BYn1BNAaXTh6JbkER3APvDg3jrQwjBUEGv12MZCQgStmd613UdpmFAt99hdAQMMeAoBb6Pn+8vBIGP8fgXk8nkuQ8QhiGSJEEURcx0OkUcx0yapkyWZcjSBLNZjFkcPYkhnU4nFLsddk+OxyOqqkJRFLy/XC64Xq+o6xpN03CkM+VQLMsS5/MZj8cD7ZI2mw0WiwXyPMd8PsdqtcJ6veZkgopJTLK2AUnaJrfbDff7naWEtN1uWUCRxMvlEtSEptzv9wxNTz85HA48Ob2R+L/1B3N/fjR5SdjHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='일부 사용자 구글 로그인 오류 페이지' title='' src='/static/3c5ea8cc5079391a9f8431c02e7f99f8/ca1dc/img.png' srcset='/static/3c5ea8cc5079391a9f8431c02e7f99f8/e7570/img.png 170w,\n/static/3c5ea8cc5079391a9f8431c02e7f99f8/f46e7/img.png 340w,\n/static/3c5ea8cc5079391a9f8431c02e7f99f8/ca1dc/img.png 680w,\n/static/3c5ea8cc5079391a9f8431c02e7f99f8/55bfd/img.png 811w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>일부 사용자 구글 로그인 오류 페이지</figcaption>\n  </figure></p>\n<br>\n<p>서버의 로그를 확인해보니, 다음과 같은 에러가 발생하고 있었습니다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/3a9e75c2e9fff154dd60f6e3e494a2a8/0b245/img_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 2.3529411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASUlEQVR42hXJyw2AIBAAUfvvTQNRWD4iy0mM9DDiaV4yS0wZYy3vGNy9c3ih1Eo+C+tm+P/vq+r8D1UVbY0QE14EHyIyLbO7c3xPMkdfgDr1gwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='서버 로그' title='' src='/static/3a9e75c2e9fff154dd60f6e3e494a2a8/ca1dc/img_1.png' srcset='/static/3a9e75c2e9fff154dd60f6e3e494a2a8/e7570/img_1.png 170w,\n/static/3a9e75c2e9fff154dd60f6e3e494a2a8/f46e7/img_1.png 340w,\n/static/3a9e75c2e9fff154dd60f6e3e494a2a8/ca1dc/img_1.png 680w,\n/static/3a9e75c2e9fff154dd60f6e3e494a2a8/02d09/img_1.png 1020w,\n/static/3a9e75c2e9fff154dd60f6e3e494a2a8/0b245/img_1.png 1331w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>서버 로그</figcaption>\n  </figure></p>\n<p>구글 로그인에 관한 에러인데 왜 Base 64 에러가 뜨는지 상당히 궁금했었습니다.</p>\n<p>그래서 구글링을 거쳐 <strong>Base64와 Base64Url의 차이</strong>라는 키워드를 알게 되었고,</p>\n<p>위의 키워드가 문제 원인 &#x26; 해결 방법을 제시해주고 있었습니다.</p>\n<hr>\n<br>\n<h1>📘 1. Base64와 Base64Url의 차이</h1>\n<p>Base64와 Base64Url의 차이를 알아보기 전에,</p>\n<p>Base64와 Base64Url이 무엇인지 간단하게 살펴봅시다.</p>\n<br>\n<h2>✅ 1-1. Base64</h2>\n<p><strong>Base64는 8비트 이진 데이터를 텍스트(ASCII 문자)로 인코딩하는 방식 중에 하나입니다.</strong></p>\n<p>파일 및 이미지나 중요한 정보를 Base64를 인코딩 하는 등 여러 컨텍스트에서 다양하게 사용이 가능합니다.</p>\n<p>예를 들어, 'Hello, World!'를 Base64로 인코딩하면 SGVsbG8sIFdvcmxkIQ==라는 문자열로 인코딩됩니다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/3cc3962c46e3a9b06fb86d8e4f06c9e2/0ea77/img_2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 93.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42qWUucsiQRDF528XQdFAxDMTwUQ8QgMFMwONBRMz+fC+7/Mtv4aSYXcWdHdg6LK63utX/Wr0yuWystmsisWiWweDgdrttjKZjAqFgnK5nLrdrvr9vur1uvL5vKrVqnq9nobDoYupKZVKajab8iiIxWJKpVKKRqPqdDqqVCqKRCJKJpOKx+NqtVpqNBoKh8NKJBKurlarudpQKORy4NPptLz9fq/H46Hj8aj5fK7n8+nWzWaj2+2m5XLp9tfrtWazmV6vl1ar1Rvz8/PjcofDQafTSR5AAogXi4UjAUh8Pp8d+HK5OMLpdKrr9freu9/vrp4cK69HIZsQAqDIT4haCiEej8cupo49uvn9cQpRgHxABrY8B6KA35BzICt7gYQA2NztdppMJm8ACrkK1Noh3Jd18FdCLh0gLypQY4TE2+3WrdYyMSv1gYQAccjfMoQcZKZAQkwNyqgnh7t/EHLBFPhbpiVIzRTAQWqCHs/c9LtMzj8uqP6YEBLIeP0KzRQbm48JAdOyn9AUQmjm/BehKfS7/DEhIwAIB3HWXPZ/el8rpDX/2EBsM/lPCiGDYDQauX8RjLKxIf7KFO7N/nqsPcgsNqVftUxbmEKr9pkxfxxkuaCvIuj5BeuwnoqwOSnCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Base64 변환표 - 출처 : base64.guru' title='' src='/static/3cc3962c46e3a9b06fb86d8e4f06c9e2/ca1dc/img_2.png' srcset='/static/3cc3962c46e3a9b06fb86d8e4f06c9e2/e7570/img_2.png 170w,\n/static/3cc3962c46e3a9b06fb86d8e4f06c9e2/f46e7/img_2.png 340w,\n/static/3cc3962c46e3a9b06fb86d8e4f06c9e2/ca1dc/img_2.png 680w,\n/static/3cc3962c46e3a9b06fb86d8e4f06c9e2/0ea77/img_2.png 682w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Base64 변환표 - 출처 : base64.guru</figcaption>\n  </figure></p>\n<p>이때, Base64를 사용하여 URL을 인코딩할 때 문제가 발생할 수 있습니다.</p>\n<p>Base64로 URL을 인코딩하게 되면, 62번 63번 문자인 '+'와 '/'의 문자가 인코딩될 수도 있습니다.</p>\n<p>URL에서 '+'는 공백을 의미하고 '/'는 Path 구분자의 역할을 수행합니다.</p>\n<p>따라서, 인코딩한 URL에 '+', '/'가 포함되면, URL에서 '+'와 '/'가 각각 문자열이 아니라 특별한 역할을 가지게 되어</p>\n<p>의도와는 다르게 동작할 수 있습니다.</p>\n<br>\n<p>따라서, 이를 보완하기 위해 <strong>Base64Url</strong>이 등장하게 되었습니다!</p>\n<br>\n<h2>✅ 1-2. Base64Url</h2>\n<p>Base64Url은 기본적으로 Base64와 인코딩 방식이 똑같습니다.</p>\n<p>대신, 위에서 의도와 다르게 동작할 수 있었던 62번, 63번 인덱스가 다른 값으로 변경된 방식입니다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/ed6978b58d46ff62140b3badfc72f469/544f7/img_3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 92.94117647058823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVR42pWTuaoCQRBF59/dAlEREVEUDE00MTAz0UADM/EP3Pd99z5OQ8nwmPfQAemeturUreo7XjabVSQSUSqVUjgcVr/fV61WUygUUjKZdGetVkvdbleFQkHRaFT5fF7NZlODwcDtY7GY0um0KpWKvHK5rFwup1KpJOC9Xk/VatUFFItF91+73Vaj0VAikXDQTCajer2uTqejeDzuoHCI9/b7vZ7Pp1hXq5Uej4fm87l2u52u16vW67U722w2WiwWer1e77PT6aTJZOLyb7ebi/cIPJ/P2m63Wi6X7nA2m7k9CRQx8HQ6dXvA5AAFZis/ByQIIIH3+90pBEQSYKrzPh6PXTIF+Q/A78ejMkBatj1gU24F+Q8Q8H+BlsCKMktAES2zRzXvo9HoPWNyAoHW2vF4dG0TaC1fLhennBXVACkyHA51OByCgSggiADaQiFAZkchwJwB5R21xLMGPR7JBPtbNoUk2s0HqQkE2oDNFlQ221DIbOMH4sU/gRiT+WFk5mSXgmIUmuqPFZJg9rBks43f2B8DUUgigKCWOf9KIcm0/Ns2zBSgnX0MxFv2LftnaD40438M5Ps0v9G+tWy2+fpSUGi3bJ4D7Df215cCjJYtGRgz5LOzy/nPe/7nB0WEnZdzcAB+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='Base64Url 변환표 - 출처 : base64.guru' title='' src='/static/ed6978b58d46ff62140b3badfc72f469/ca1dc/img_3.png' srcset='/static/ed6978b58d46ff62140b3badfc72f469/e7570/img_3.png 170w,\n/static/ed6978b58d46ff62140b3badfc72f469/f46e7/img_3.png 340w,\n/static/ed6978b58d46ff62140b3badfc72f469/ca1dc/img_3.png 680w,\n/static/ed6978b58d46ff62140b3badfc72f469/544f7/img_3.png 684w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>Base64Url 변환표 - 출처 : base64.guru</figcaption>\n  </figure>\nBase64에서 의도와 다르게 동작할 수 있었던 62, 63번 인덱스인 '+'와 '/'가 '-'와 '_'로 변경된 걸 볼 수 있습니다.</p>\n<p>이를 통해 URL을 더욱 안전하게 인코딩 및 디코딩하여 사용할 수 있습니다.</p>\n<hr>\n<br>\n<h1>❓ 2. 문제 원인</h1>\n<p>그렇다면, 왜 구글 로그인에서 문제가 발생하고 있었던 걸까요?</p>\n<p>한번 천천히 따라가 봅시다.</p>\n<p>문제가 발생했던 코드는 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">extractElementFromToken</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> googleIdToken<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> payLoad <span class=\"token operator\">=</span> googleIdToken<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\\\.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token constant\">PAYLOAD_INDEX</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> decodedPayLoad <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Base64</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDecoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>payLoad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">JacksonJsonParser</span> jacksonJsonParser <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JacksonJsonParser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> jacksonJsonParser<span class=\"token punctuation\">.</span><span class=\"token function\">parseMap</span><span class=\"token punctuation\">(</span>decodedPayLoad<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>구글이 제공하는 사용자 정보인 IdToken을 받아서, 해당 JWT IdToken에서</p>\n<p>이메일, 사용자 프로필 사진 등 여러 정보를 추출하는 메소드입니다.</p>\n<p>여기서 문제가 발생한 부분은 다음과 같습니다. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> decodedPayLoad <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Base64</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDecoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>payLoad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>구글의 IdToken을 Base64 Decoder로 디코딩하여 정보를 가져오고 있는데요.</p>\n<p>왜 여기서 문제가 발생했을까요?</p>\n<br>\n<p>OpenID Connect 공식 문서의 IdToken 관련 정보를 살펴보면 다음과 같이 나와 있습니다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/644045980c4a787e40e27d177dd457f0/bbbf7/img_4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 15.294117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAnElEQVR42l2OyQ6DMAxE+f9vRCiQ4CzNBmohCYepE6mXWrL8vI1mCiFAa437ulBKQa0VrVXme/StNZ6Vwb/98zyDe/2PqT8QETTnrhS89wjpgI8ZPiQY+4IxFlJKZjfYWAtiE9Y5nOeJlBK6sc5TV805Y55nLMuCnTSEJGy7gSILsSqIjSCEwLpKhJj4/sD7cyOykPevYcKxeIwRXx1R48RO1ChTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='OpenID Connect Core 1.0 incorporating errata set 1' title='' src='/static/644045980c4a787e40e27d177dd457f0/ca1dc/img_4.png' srcset='/static/644045980c4a787e40e27d177dd457f0/e7570/img_4.png 170w,\n/static/644045980c4a787e40e27d177dd457f0/f46e7/img_4.png 340w,\n/static/644045980c4a787e40e27d177dd457f0/ca1dc/img_4.png 680w,\n/static/644045980c4a787e40e27d177dd457f0/02d09/img_4.png 1020w,\n/static/644045980c4a787e40e27d177dd457f0/bbbf7/img_4.png 1280w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>OpenID Connect Core 1.0 incorporating errata set 1</figcaption>\n  </figure></p>\n<p>마지막 줄에 다음과 같이 나와 있습니다.</p>\n<blockquote>\n<p>base64url로 인코딩합니다.</p>\n</blockquote>\n<p>구글 IdToken의 정보들은 Base64Url로 인코딩되어 있는데, 애플리케이션 코드에서는 Base64 Decoder를 사용하기 때문에</p>\n<p>오류가 발생한 것이었습니다.</p>\n<p>그렇다면, 왜 모든 사용자의 구글 로그인이 에러가 발생하는게 아니라 일부 사용자만 발생했을까요?</p>\n<p>해당 이유는 위의 Base64와 Base64Url의 차이에 있었습니다!</p>\n<p>위에서 살펴봤듯이, 둘의 차이는 62번, 63번 인덱스의 변환값이 다르다는 것이었는데요!</p>\n<p>구글이 IdToken을 Base64Url을 사용하여 인코딩할 때 62번 또는 63번 값인 '-', '_'가 포함되지 않는다면</p>\n<p>Base64로 디코딩을 해도 전부 디코딩이 가능하기 때문에 오류가 발생하지 않았던 것입니다.</p>\n<p>대신, '-', '_'가 포함된다면 Base64로는 해당 값을 디코딩할 수 없기 때문에 에러가 발생한 것입니다.</p>\n<hr>\n<br>\n<h1>❓ 3. 문제 해결</h1>\n<p>문제 해결은 정말 간단하게 할 수 있었습니다!</p>\n<p>애플리케이션의 코드에서 Base64 Decoder 대신 Base64 Url Decoder를 사용하여</p>\n<p>Base64Url로 디코딩을 진행하면 해결할 수 있었습니다!</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token operator\">*</span> 문제 발생 코드 <span class=\"token punctuation\">(</span><span class=\"token class-name\">Base64</span> <span class=\"token class-name\">Decoding</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> decodedPayLoad <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Base64</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDecoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>payLoad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">*</span> 해결 <span class=\"token punctuation\">(</span><span class=\"token class-name\">Base64Url</span> <span class=\"token class-name\">Decoding</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> decodedPayLoad <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Base64</span><span class=\"token punctuation\">.</span><span class=\"token function\">getUrlDecoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>payLoad<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<p>이번 문제는 운영 서버에서 처음으로 발생한 문제이고, 처음 해본 트러블 슈팅이었습니다.</p>\n<p>트러블 슈팅을 하면서 다음과 같은 로그를 보고 추적할 수 있었기 때문에 해결이 가능하다고 생각했습니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/3a9e75c2e9fff154dd60f6e3e494a2a8/0b245/img_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 2.3529411764705883%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASUlEQVR42hXJyw2AIBAAUfvvTQNRWD4iy0mM9DDiaV4yS0wZYy3vGNy9c3ih1Eo+C+tm+P/vq+r8D1UVbY0QE14EHyIyLbO7c3xPMkdfgDr1gwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='서버 로그' title='' src='/static/3a9e75c2e9fff154dd60f6e3e494a2a8/ca1dc/img_1.png' srcset='/static/3a9e75c2e9fff154dd60f6e3e494a2a8/e7570/img_1.png 170w,\n/static/3a9e75c2e9fff154dd60f6e3e494a2a8/f46e7/img_1.png 340w,\n/static/3a9e75c2e9fff154dd60f6e3e494a2a8/ca1dc/img_1.png 680w,\n/static/3a9e75c2e9fff154dd60f6e3e494a2a8/02d09/img_1.png 1020w,\n/static/3a9e75c2e9fff154dd60f6e3e494a2a8/0b245/img_1.png 1331w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>서버 로그</figcaption>\n  </figure></p>\n<p>그래서 Base64와 Base64Url의 차이도 깨닫게 되었지만</p>\n<p>더 중요한 것은 로깅 &#x26; 모니터링의 중요성을 알게 되었다는 점인 것 같습니다!</p>","frontmatter":{"title":"Base64와 Base64Url의 차이 및 구글 로그인 Trouble Shooting","date":"August 20, 2023","update":"August 20, 2023","tags":["Base64","Base64Url","구글 로그인"],"series":null},"fields":{"slug":"/base64url/","readingTime":{"minutes":7.07}}},"seriesList":{"edges":[{"node":{"id":"9b5cdcae-47e9-5839-9ed5-77d2bb13f063","fields":{"slug":"/event-storming/"},"frontmatter":{"title":"팀바팀 이벤트 스토밍(Event Storming) 도입기"}}},{"node":{"id":"cc7a0ab1-5503-5c29-aca6-5707103b16cd","fields":{"slug":"/local-date-time-binding/"},"frontmatter":{"title":"LocalDateTime 원하는 Format으로 바인딩하기 (feat.@DateTimeFormat, @JsonFormat)"}}},{"node":{"id":"df971529-c38c-5b99-8b34-e0d1f887ad8c","fields":{"slug":"/component-styling/"},"frontmatter":{"title":"팀바팀 컴포넌트 스타일링 방법 선택"}}},{"node":{"id":"bc022be2-f94e-5294-9b49-6fba751b5bfd","fields":{"slug":"/frontend-ci/"},"frontmatter":{"title":"프론트엔드 Github Action 테스트 자동화"}}},{"node":{"id":"fb6c635b-2fb9-5625-88bb-0c70f8e7543a","fields":{"slug":"/frontend-husky/"},"frontmatter":{"title":"프론트엔드 Husky 사용해서 commit 단위로 Lint 검사"}}},{"node":{"id":"dde0edaf-b006-51f0-a50e-f47285556fc0","fields":{"slug":"/react-query-reason/"},"frontmatter":{"title":"팀바팀 React query 도입이유"}}},{"node":{"id":"0bf82b69-7aee-5aa6-bb7e-8d973d2bc283","fields":{"slug":"/spring-event/"},"frontmatter":{"title":"스프링 이벤트를 사용하여 도메인 의존성 분리하기"}}},{"node":{"id":"b1a9ce77-e471-5b77-a2c6-5d3532cfc926","fields":{"slug":"/base64url/"},"frontmatter":{"title":"Base64와 Base64Url의 차이 및 구글 로그인 Trouble Shooting"}}}]},"previous":{"fields":{"slug":"/spring-event/"},"frontmatter":{"title":"스프링 이벤트를 사용하여 도메인 의존성 분리하기"}},"next":null},"pageContext":{"id":"b1a9ce77-e471-5b77-a2c6-5d3532cfc926","series":null,"previousPostId":"0bf82b69-7aee-5aa6-bb7e-8d973d2bc283","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}